sudo: required
services:
- docker
language: node_js
node_js: node
script:
- cd ./tests/signaling-server/
- docker build -t signaling .
- docker run -d -p 5000:5000 --name signaling -e "PORT=5000" -e "HOST=localhost" signaling
- cd ../../
- npm run build:debug
- npm run build:prod
- npm run test
- npm run doc:build
- docker kill signaling
- docker rm signaling
- docker rmi signaling
deploy:
  provider: heroku
  api_key:
    secure: rse3MZucU8SSUoki1xw0dyULlYFCwFUC2DiY59pY6qeQ4Cn+Pw3IG7VPhMRivVKUXkitCNj+AB9OZz8fLFCebMajrk/NbYcwYNsxt9kOzj6tFYu13L9Gp0VlvNzEugxLFIDaau6w87Lq5n3yZxZAsWPRo9BQ1MF99BhwWs5eK70G33bj2w8IROx3d24CvRMIdndOG3GqwJvfzV5wJZ3TfsHpeegUxO3lH6QDyf4v3ZlS4AwGC4TWUwc6ys6e8U8srjWqKA1X/NrY6cgQR4Mrj+dLvZnm7vikubFj9MD4hoQ5MDoIQzZdZrcaGZ+8ULBkGEIFJd84rigu83+mCtsqGJWYcMhgPZ5GQO2xqUpyB3AcJW6zjpTza92OnAB6vCbCH9iUK0jpsDKYKrA5SW3UdMwnL3sGN5ULt1Agdb7ZLJfn3WUiqonm7iJcwhO7m6lGSEf8F54VrT1KCa5b/WBfnU1sHiRT0v1kbvmofnoSMdWcWVf9dMFS5oyQXLrx4gZLlYRgNvDrfqnTffXwchvzNAjs/2HEeL4jnBk2ZKu6s+jLsDrcHL3FDhW3lDO2Fqe9Hu7xENPAYgVhgNzJXE9PcO33nL67je3j3szu20AOAR9a86Qz0gs3Yv5nA0isZuqmyAjVtBHy9r5FPYx7uF2r9DCGE/m6RN2/K1OXm+T+iM4=
  app: signaling-v2
  on:
    branch: foglet-rework
