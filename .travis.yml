sudo: required
services:
- docker
language: node_js
node_js: node
script:
- cd ./tests/signaling-server/
- docker build -t signaling .
- docker run -d -p 5000:5000 --name signaling -e "PORT=5000" -e "HOST=localhost" signaling
- cd ../../
- npm run build:debug
- npm run build:prod
- npm run test
- npm run doc:build
- docker kill signaling
- docker rm signaling
- docker rmi signaling
deploy:
  provider: heroku
  local_dir: tests/signaling-server
  app: signaling-v2
  on:
    branch: foglet-rework
  api_key:
    secure: XerJspmeWOK4wKZf0Yf7UbRGgvp+84BKVACGRNuZ7uSxBzFjlTSVCYGY6p85cAY8Pzr5RhuMSWSk+JK4i2iMT29dZH36IhOI9vj4C53Y8CwBe4r2FbTesJvmgdOWwweqe7EGDakDaX+6y2mk8RRnhecw1EZ21kQgmvAAxpkGpdK4Ldm4AspWYv5KVcf65ttM6Ac3IbJnI2cXbl0wmXGezgkNh9CoHInxj4NYAHrwjP1lJQuGF0kjEx06ow2OF+86KK1itWKak8CsRkEdLSUeOuGt+I1B/Xdf913BQDw+CRLSTHoGNLW0ey+7pfmEYXEtWriM2lHCl9NU/cVYm1TG1UYuSdoKG8RlwGIJjd5WM6vaqLmQ0UQ8TdACHn0lwT9dWdncoCH3DEYTbg4gLy3ZF3Uw6kczvSyeyD6sd+wn5PZlSI2eKgnf1P2Gk53fvEjxXKSwSzJs4sUV79BH4T09rGxcSTuwWsfTFxDg1fwm2PP7OOxvKXukce4IlnKuZiD3D2KFnYJzb6r5QjLd4tpvUIziv9XDuPT7ciaz+Yn+9RKnDrj5hHajjacdaecrUanedURSh1H/gq54yI0D+4CTLdmJrG9h39KV/XAvK29VvtQmkQofFB2+nzvr2fWZ2gbZYTMnjfx4zDp/kPozlt3MUznVjyC0j6WgFQOnPQ5jC1Q=
