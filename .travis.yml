sudo: required
services:
  - docker
language: node_js
node_js: node

script:
  - cd ./tests/signaling-server/
  - docker build -t signaling .
  - docker run -d -p 5000:5000 --name signaling -e "PORT=5000" -e "HOST=localhost" signaling
  - cd ../../
  - npm run build:debug
  - npm run build:prod
  - npm run test
  - npm run doc:build
  - docker kill signaling
  - docker rm signaling
  - docker rmi signaling

# deploy:
#   provider: npm
#   email: folkvir@outlook.fr
#   api_key: $NPM
#   on:
#     tags: true
#     repo: RAN3D/foglet-core
# notifications:
#   email: false
#
# deploy:
#   provider: pages
#   skip-cleanup: true
#   github-token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
#   keep-history: true
#   local_dir: docs
#   on:
#     branch: master
